{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../utils/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":193},"end":{"line":4,"column":35,"index":228}}],"key":"XoJ+jbKCrEi38eKczMqtlbk+TCk=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _utilsApi = require(_dependencyMap[2], \"../utils/api\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      checkAuth();\n    }, []);\n    const checkAuth = async () => {\n      try {\n        const token = await AsyncStorage.default.getItem('token');\n        if (token) {\n          const userData = await _utilsApi.api.getProfile();\n          setUser(userData);\n        }\n      } catch (error) {\n        console.error('Auth check failed:', error);\n        await AsyncStorage.default.removeItem('token');\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      const response = await _utilsApi.api.login(email, password);\n      await AsyncStorage.default.setItem('token', response.token);\n      setUser(response.user);\n\n      // Update streak\n      try {\n        await _utilsApi.api.updateStreak();\n      } catch (error) {\n        console.error('Streak update failed:', error);\n      }\n    };\n    const register = async (username, email, password) => {\n      const response = await _utilsApi.api.register(username, email, password);\n      await AsyncStorage.default.setItem('token', response.token);\n      setUser(response.user);\n    };\n    const logout = async () => {\n      await AsyncStorage.default.removeItem('token');\n      setUser(null);\n    };\n    const refreshUser = async () => {\n      try {\n        const userData = await _utilsApi.api.getProfile();\n        setUser(userData);\n      } catch (error) {\n        console.error('Failed to refresh user:', error);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        loading,\n        login,\n        register,\n        logout,\n        refreshUser\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 5\n    }, this);\n  };\n  const useAuth = () => {\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n});","lineCount":105,"map":[[13,2,17,0,"Object"],[13,8,17,0],[13,9,17,0,"defineProperty"],[13,23,17,0],[13,24,17,0,"exports"],[13,31,17,0],[14,4,17,0,"enumerable"],[14,14,17,0],[15,4,17,0,"get"],[15,7,17,0],[15,18,17,0,"get"],[15,19,17,0],[16,6,17,0],[16,13,17,0,"AuthProvider"],[16,25,17,0],[17,4,17,0],[18,2,17,0],[19,2,80,0,"Object"],[19,8,80,0],[19,9,80,0,"defineProperty"],[19,23,80,0],[19,24,80,0,"exports"],[19,31,80,0],[20,4,80,0,"enumerable"],[20,14,80,0],[21,4,80,0,"get"],[21,7,80,0],[21,18,80,0,"get"],[21,19,80,0],[22,6,80,0],[22,13,80,0,"useAuth"],[22,20,80,0],[23,4,80,0],[24,2,80,0],[25,2,1,0],[25,6,1,0,"_react"],[25,12,1,0],[25,15,1,0,"require"],[25,22,1,0],[25,23,1,0,"_dependencyMap"],[25,37,1,0],[26,2,2,0],[26,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[26,42,2,0],[26,45,2,0,"require"],[26,52,2,0],[26,53,2,0,"_dependencyMap"],[26,67,2,0],[27,2,2,0],[27,6,2,0,"AsyncStorage"],[27,18,2,0],[27,21,2,0,"_interopDefault"],[27,36,2,0],[27,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[27,73,2,0],[28,2,4,0],[28,6,4,0,"_utilsApi"],[28,15,4,0],[28,18,4,0,"require"],[28,25,4,0],[28,26,4,0,"_dependencyMap"],[28,40,4,0],[29,2,4,35],[29,6,4,35,"_reactJsxDevRuntime"],[29,25,4,35],[29,28,4,35,"require"],[29,35,4,35],[29,36,4,35,"_dependencyMap"],[29,50,4,35],[30,2,15,0],[30,8,15,6,"AuthContext"],[30,19,15,17],[30,35,15,20],[30,39,15,20,"createContext"],[30,45,15,33],[30,46,15,33,"createContext"],[30,59,15,33],[30,61,15,63,"undefined"],[30,70,15,72],[30,71,15,73],[31,2,17,7],[31,8,17,13,"AuthProvider"],[31,20,17,25],[31,23,17,28,"AuthProvider"],[31,24,17,29],[32,4,17,31,"children"],[33,2,17,65],[33,3,17,66],[33,8,17,71],[34,4,18,2],[34,10,18,8],[34,11,18,9,"user"],[34,15,18,13],[34,17,18,15,"setUser"],[34,24,18,22],[34,25,18,23],[34,28,18,26],[34,32,18,26,"useState"],[34,38,18,34],[34,39,18,34,"useState"],[34,47,18,34],[34,49,18,48],[34,53,18,52],[34,54,18,53],[35,4,19,2],[35,10,19,8],[35,11,19,9,"loading"],[35,18,19,16],[35,20,19,18,"setLoading"],[35,30,19,28],[35,31,19,29],[35,34,19,32],[35,38,19,32,"useState"],[35,44,19,40],[35,45,19,40,"useState"],[35,53,19,40],[35,55,19,41],[35,59,19,45],[35,60,19,46],[36,4,21,2],[36,8,21,2,"useEffect"],[36,14,21,11],[36,15,21,11,"useEffect"],[36,24,21,11],[36,26,21,12],[36,32,21,18],[37,6,22,4,"checkAuth"],[37,15,22,13],[37,16,22,14],[37,17,22,15],[38,4,23,2],[38,5,23,3],[38,7,23,5],[38,9,23,7],[38,10,23,8],[39,4,25,2],[39,10,25,8,"checkAuth"],[39,19,25,17],[39,22,25,20],[39,28,25,20,"checkAuth"],[39,29,25,20],[39,34,25,32],[40,6,26,4],[40,10,26,8],[41,8,27,6],[41,14,27,12,"token"],[41,19,27,17],[41,22,27,20],[41,28,27,26,"AsyncStorage"],[41,40,27,38],[41,41,27,38,"default"],[41,48,27,38],[41,49,27,39,"getItem"],[41,56,27,46],[41,57,27,47],[41,64,27,54],[41,65,27,55],[42,8,28,6],[42,12,28,10,"token"],[42,17,28,15],[42,19,28,17],[43,10,29,8],[43,16,29,14,"userData"],[43,24,29,22],[43,27,29,25],[43,33,29,31,"api"],[43,42,29,34],[43,43,29,34,"api"],[43,46,29,34],[43,47,29,35,"getProfile"],[43,57,29,45],[43,58,29,46],[43,59,29,47],[44,10,30,8,"setUser"],[44,17,30,15],[44,18,30,16,"userData"],[44,26,30,24],[44,27,30,25],[45,8,31,6],[46,6,32,4],[46,7,32,5],[46,8,32,6],[46,15,32,13,"error"],[46,20,32,18],[46,22,32,20],[47,8,33,6,"console"],[47,15,33,13],[47,16,33,14,"error"],[47,21,33,19],[47,22,33,20],[47,42,33,40],[47,44,33,42,"error"],[47,49,33,47],[47,50,33,48],[48,8,34,6],[48,14,34,12,"AsyncStorage"],[48,26,34,24],[48,27,34,24,"default"],[48,34,34,24],[48,35,34,25,"removeItem"],[48,45,34,35],[48,46,34,36],[48,53,34,43],[48,54,34,44],[49,6,35,4],[49,7,35,5],[49,16,35,14],[50,8,36,6,"setLoading"],[50,18,36,16],[50,19,36,17],[50,24,36,22],[50,25,36,23],[51,6,37,4],[52,4,38,2],[52,5,38,3],[53,4,40,2],[53,10,40,8,"login"],[53,15,40,13],[53,18,40,16],[53,24,40,16,"login"],[53,25,40,23,"email"],[53,30,40,36],[53,32,40,38,"password"],[53,40,40,54],[53,45,40,59],[54,6,41,4],[54,12,41,10,"response"],[54,20,41,18],[54,23,41,21],[54,29,41,27,"api"],[54,38,41,30],[54,39,41,30,"api"],[54,42,41,30],[54,43,41,31,"login"],[54,48,41,36],[54,49,41,37,"email"],[54,54,41,42],[54,56,41,44,"password"],[54,64,41,52],[54,65,41,53],[55,6,42,4],[55,12,42,10,"AsyncStorage"],[55,24,42,22],[55,25,42,22,"default"],[55,32,42,22],[55,33,42,23,"setItem"],[55,40,42,30],[55,41,42,31],[55,48,42,38],[55,50,42,40,"response"],[55,58,42,48],[55,59,42,49,"token"],[55,64,42,54],[55,65,42,55],[56,6,43,4,"setUser"],[56,13,43,11],[56,14,43,12,"response"],[56,22,43,20],[56,23,43,21,"user"],[56,27,43,25],[56,28,43,26],[58,6,45,4],[59,6,46,4],[59,10,46,8],[60,8,47,6],[60,14,47,12,"api"],[60,23,47,15],[60,24,47,15,"api"],[60,27,47,15],[60,28,47,16,"updateStreak"],[60,40,47,28],[60,41,47,29],[60,42,47,30],[61,6,48,4],[61,7,48,5],[61,8,48,6],[61,15,48,13,"error"],[61,20,48,18],[61,22,48,20],[62,8,49,6,"console"],[62,15,49,13],[62,16,49,14,"error"],[62,21,49,19],[62,22,49,20],[62,45,49,43],[62,47,49,45,"error"],[62,52,49,50],[62,53,49,51],[63,6,50,4],[64,4,51,2],[64,5,51,3],[65,4,53,2],[65,10,53,8,"register"],[65,18,53,16],[65,21,53,19],[65,27,53,19,"register"],[65,28,53,26,"username"],[65,36,53,42],[65,38,53,44,"email"],[65,43,53,57],[65,45,53,59,"password"],[65,53,53,75],[65,58,53,80],[66,6,54,4],[66,12,54,10,"response"],[66,20,54,18],[66,23,54,21],[66,29,54,27,"api"],[66,38,54,30],[66,39,54,30,"api"],[66,42,54,30],[66,43,54,31,"register"],[66,51,54,39],[66,52,54,40,"username"],[66,60,54,48],[66,62,54,50,"email"],[66,67,54,55],[66,69,54,57,"password"],[66,77,54,65],[66,78,54,66],[67,6,55,4],[67,12,55,10,"AsyncStorage"],[67,24,55,22],[67,25,55,22,"default"],[67,32,55,22],[67,33,55,23,"setItem"],[67,40,55,30],[67,41,55,31],[67,48,55,38],[67,50,55,40,"response"],[67,58,55,48],[67,59,55,49,"token"],[67,64,55,54],[67,65,55,55],[68,6,56,4,"setUser"],[68,13,56,11],[68,14,56,12,"response"],[68,22,56,20],[68,23,56,21,"user"],[68,27,56,25],[68,28,56,26],[69,4,57,2],[69,5,57,3],[70,4,59,2],[70,10,59,8,"logout"],[70,16,59,14],[70,19,59,17],[70,25,59,17,"logout"],[70,26,59,17],[70,31,59,29],[71,6,60,4],[71,12,60,10,"AsyncStorage"],[71,24,60,22],[71,25,60,22,"default"],[71,32,60,22],[71,33,60,23,"removeItem"],[71,43,60,33],[71,44,60,34],[71,51,60,41],[71,52,60,42],[72,6,61,4,"setUser"],[72,13,61,11],[72,14,61,12],[72,18,61,16],[72,19,61,17],[73,4,62,2],[73,5,62,3],[74,4,64,2],[74,10,64,8,"refreshUser"],[74,21,64,19],[74,24,64,22],[74,30,64,22,"refreshUser"],[74,31,64,22],[74,36,64,34],[75,6,65,4],[75,10,65,8],[76,8,66,6],[76,14,66,12,"userData"],[76,22,66,20],[76,25,66,23],[76,31,66,29,"api"],[76,40,66,32],[76,41,66,32,"api"],[76,44,66,32],[76,45,66,33,"getProfile"],[76,55,66,43],[76,56,66,44],[76,57,66,45],[77,8,67,6,"setUser"],[77,15,67,13],[77,16,67,14,"userData"],[77,24,67,22],[77,25,67,23],[78,6,68,4],[78,7,68,5],[78,8,68,6],[78,15,68,13,"error"],[78,20,68,18],[78,22,68,20],[79,8,69,6,"console"],[79,15,69,13],[79,16,69,14,"error"],[79,21,69,19],[79,22,69,20],[79,47,69,45],[79,49,69,47,"error"],[79,54,69,52],[79,55,69,53],[80,6,70,4],[81,4,71,2],[81,5,71,3],[82,4,73,2],[82,24,74,4],[82,28,74,4,"_reactJsxDevRuntime"],[82,47,74,4],[82,48,74,4,"jsxDEV"],[82,54,74,4],[82,56,74,5,"AuthContext"],[82,67,74,16],[82,68,74,17,"Provider"],[82,76,74,25],[83,6,74,26,"value"],[83,11,74,31],[83,13,74,33],[84,8,74,35,"user"],[84,12,74,39],[85,8,74,41,"loading"],[85,15,74,48],[86,8,74,50,"login"],[86,13,74,55],[87,8,74,57,"register"],[87,16,74,65],[88,8,74,67,"logout"],[88,14,74,73],[89,8,74,75,"refreshUser"],[90,6,74,87],[90,7,74,89],[91,6,74,89,"children"],[91,14,74,89],[91,16,75,7,"children"],[92,4,75,15],[93,6,75,15,"fileName"],[93,14,75,15],[93,16,75,15,"_jsxFileName"],[93,28,75,15],[94,6,75,15,"lineNumber"],[94,16,75,15],[95,6,75,15,"columnNumber"],[95,18,75,15],[96,4,75,15],[96,11,76,26],[96,12,76,27],[97,2,78,0],[97,3,78,1],[98,2,80,7],[98,8,80,13,"useAuth"],[98,15,80,20],[98,18,80,23,"useAuth"],[98,19,80,23],[98,24,80,29],[99,4,81,2],[99,10,81,8,"context"],[99,17,81,15],[99,20,81,18],[99,24,81,18,"useContext"],[99,30,81,28],[99,31,81,28,"useContext"],[99,41,81,28],[99,43,81,29,"AuthContext"],[99,54,81,40],[99,55,81,41],[100,4,82,2],[100,8,82,6],[100,9,82,7,"context"],[100,16,82,14],[100,18,82,16],[101,6,83,4],[101,12,83,10],[101,16,83,14,"Error"],[101,21,83,19],[101,22,83,20],[101,64,83,62],[101,65,83,63],[102,4,84,2],[103,4,85,2],[103,11,85,9,"context"],[103,18,85,16],[104,2,86,0],[104,3,86,1],[105,0,86,2],[105,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","checkAuth","login","register","logout","refreshUser","useAuth"],"mappings":"AAA;4BCgB;YCI;GDE;oBEE;GFa;gBGE;GHW;mBIE;GJI;iBKE;GLG;sBME;GNO;CDO;uBQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}